<!doctype html>
<html lang="en">
   <head>
      <meta charset="utf-8">
      <title>Emulating a Controller With a Keyboard</title>
      <link rel="icon" type="image/x-icon" href="../../../pics/favicon/favicon.ico">
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css">
      <link rel="stylesheet" href="../pages/tournament-document.css">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
   </head>
   <body>
   <h1>Emulating a Controller With a Keyboard</h1>
      <p>This is a tutorial on using UCR, which emulates an xbox controller and uses your keyboard as input. This is useful in cases where multiple people only have a keyboard to play games with, and the game does not let you use a different set of keys for each player. It can also be useful if the host can't or doesn't want to give you actual keyboard permissions. UCR can take a while to set up, so if possible, use a controller instead.</p>
      <br>
      <p>Note: There's also a built-in basic "keyboard to controller" emulation when you join games hosted via Arcade Beta, which requires no setup. It lacks button rebinding, d-pad, and the right analog stick, so you may only use it for games with simple controls, like Overcooked.</p>
      <br>
   <h1>Installing UCR</h1> 
      <p>You will want to setup UCR on the guest's computer, instead of the host. This will allow the host to use their mouse and keyboard as normal, while the guest uses the emulated controller.</p>     
      <br>
      <ol>
         <li>Download  <a href="../software/UCR_v0.9.0.zip">UCR</a> and  <a href="../software/Interception.zip">Interception</a>, and unzip both</li>
         <li>Go to Interception's folder -> command line installer</li>
         <li>Hold shift and right-click install-interception.exe, then click Copy as path</li>
      </ol>
      <p><img src="../pics/emulate-controller-with-keyboard/interception_copy_as_path.png" alt="controller-setting1" style="max-width:100%;height:auto;"></p>
      <br>
      <p>Open command prompt as administrator</p>
      <p><img src="../pics/emulate-controller-with-keyboard/run_as_administrator_cmd.png" alt="controller-setting2" style="max-width:100%;height:auto;"></p>
      <br>
      <p>Paste the path, type " /install" (with the space), and press enter</p>
      <p>You should see a success message. If you don't, you might have done something wrong. You can get a general idea of how a correctly entered command looks like below, although the path you copied may look different</p>
      <p><img src="../pics/emulate-controller-with-keyboard/command_prompt_example.png" alt="controller-setting3" style="max-width:100%;height:auto;"></p>
      <p>Restart your computer</p>
   <h1>Creating a profile</h1>
      <ol>
         <li>Open UCR from its folder</li>
         <li>Click the plus icon next to Profiles</li>
         <li>On Input Devices, select a keyboard (starting with K:) from Core_Interception. If you see multiple keyboards, you can choose one and if things don't work later on, re-create a profile with another keyboard selected</li>
         <li>On Output Devices, select ViGEm Xbox 360 Controller 1. If you don't see ViGEm, reinstall Parsec then restart your PC</li>
         <li>Name the profile anything you want and hit Create</li>
      </ol>
      <p><img src="../pics/emulate-controller-with-keyboard/create_profile.png" alt="controller-setting4" style="max-width:100%;height:auto;"></p>
      <br>
   <h1>Configuring the profile</h1>
      <p>Once you create the profile, double-click it in the list to start configuring which keys on the keyboard will trigger a button on the controller. The following is what you do for each button:</p>
      <ol>
         <li>Choose a plugin on the left (each plugin is explained further below this article)</li>
         <li>Name your plugin anything you want and hit Accept</li>
         <li>On the right side, click the blue buttons to choose your key and controller button</li>
         <li>Repeat for every button in the controller</li>
      </ol>
      <p><img src="../pics/emulate-controller-with-keyboard/remapping_process.png" alt="controller-setting5" style="max-width:100%;height:auto;"></p>
      <p>In the example above, I set my keyboard key "L" to trigger the face button "A" in the controller. There are three plugins you can choose, and each of them are for a specific set of buttons on the controller. Click a section below to learn more about each.</p>
      <br>
   <h1>Button to Button - Normal buttons</h1>
      <p>Use it for normal buttons (A, B, Start, Dpad, etc.). There's nothing special to this, just click the blue buttons to select what key on your keyboard and button on the controller it is.</p>
      <br>
   <h1>Button to Axis - Left and right triggers</h1>
      <p>Use for the left trigger (LT) and right trigger (RT). Map as normal, but set Axis on Release to -100. If you forget to set this to -100, you may find your triggers are permanently activated when in-game.</p>
      <p><img src="../pics/emulate-controller-with-keyboard/zklodf.png" alt="controller-setting6" style="max-width:100%;height:auto;"></p>
      <br>
   <h1>Buttons to Axis - Analog sticks</h1>
      <p>Use for the left stick (LX, LY) and right stick (RX, RY). You'll be mapping two keys at once for each axis, such as W and S for up and down.</p>
      <p><img src="../pics/emulate-controller-with-keyboard/gk8hiw.png" alt="controller-setting7" style="max-width:100%;height:auto;"></p>
      <br>
      <p>To make sure the directions aren't inverted, you need to map in this specific order:</p>
      <ol>
         <li>LX (left stick, horizontal): map the right key first, then left</li>
         <li>LY (left stick, vertical): up then down</li>
         <li>RX (right stick, horizontal): right then left</li>
         <li>RY (right stick, vertical): up then down</li>
      </ol>
      <br>
      <p>The example below maps the left stick to WASD.</p>
      <p><img src="../pics/emulate-controller-with-keyboard/csyvh0.png" alt="controller-setting8" style="max-width:100%;height:auto;"></p>
      <br>
   <h1>Activating and troubleshooting</h1>
      <p>To activate the mapping, select the profile and hit the play button to activate. You can then test if the controller works as expected with <a href="https://gamepad-tester.com/">gamepad-tester.com</a></p>
      <p><img src="../pics/emulate-controller-with-keyboard/n72edy.png" alt="controller-setting9" style="max-width:100%;height:auto;"></p>
   <h1>Other considerations</h1>
      <ul>
         <li>The mapped keys won't prevent your keyboard from typing as normal, unless you follow <a href="https://github.com/snoothy/ucr/wiki/Core_Interception#blocking-with-interception">this tutorial to enable blocking</a></li>
         <li>If you notice extra key presses being added or the mouse being triggered, <a href="https://support.parsecgaming.com/hc/en-us/articles/360011883691">it's likely because of Steam</a></li>
         <li>If the UCR controller isn't detected by the host, the host should look into <a href="https://support.parsec.app/hc/en-us/articles/115002702731">the article on controller issues</a></li>
         <li>If people are still controlling the same player in the game, check this <a href="https://support.parsec.app/hc/en-us/articles/360004069132">article on issues with controlling the same player</a>. If at least one person (such as the host) is still using the real mouse and keyboard instead of UCR, you may need that person to also use UCR to avoid this, depending on how the game was programmed.</li>
      </ul>
   </body>
</html>